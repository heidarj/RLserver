@{
    ViewBag.Title = "Teams";
}

@Html.Partial("_IndexHeader")

<hr/>

<table class="table table-striped table-bordered table-responsive" id="teams">
    <thead class="">
    <tr>
        <th>Id</th>
        <th>Name</th>
        <th>Members</th>
        <th>Edit</th>
        <th>Delete</th>
    </tr>
    </thead>
</table>

@section scripts
{
    <script>
        
            var teamsDataTable = $("#teams").DataTable({
                dom: "<'row'<'col-md-9 col-sm-12'f><'col-md-3 col-sm-12'l>>" +
                     "<'row'<tr>>" +
                     "<'row'<'col-md-4 col-sm-12'i><'col-md-8 col-sm-12'p>>",
                ajax: {
                    url: "/api/teams",
                    dataSrc: ""
                },
                autoWidth: false,
                columns: [
                    {
                        data: "id"
                    },
                    {
                        data: "name",
                        render: function(data, type, team) {
                            return "<a class='link' href='/teams/details/" + team.id + "'>" + team.name + "</a>";
                        }
                    },
                    {
                        data: "members",
                        render: function(data, type, team) {
                            return team.members.length;
                        }
                    },
                    {
                        data: "",
                        orderable: false,
                        render: function(data, type, team) {
                        return "<a href='/teams/edit/" + team.id + "' class='btn btn-outline-primary btn-block'>Edit <i class='far fa-pencil m-1'></i></a>";
                        },
                        width: "10%"
                    },
                    {
                        data: "",
                        orderable: false,
                        render: function(data, type, team) {
                        return "<a href='/teams/edit/" + team.id + "' class='btn btn-outline-danger btn-block'>Delete <i class='far fa-trash-alt m-1'></i></a>";
                        },
                        width: "10%"
                    }
                ]
            })

    </script>
}